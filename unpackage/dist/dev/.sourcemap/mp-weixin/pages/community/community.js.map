{"version":3,"file":"community.js","sources":["pages/community/community.vue","../../../hbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tbXVuaXR5L2NvbW11bml0eS52dWU"],"sourcesContent":["<template>\r\n  <view class=\"p-3\">\r\n    <view class=\"card\">\r\n      <input v-model=\"content\" placeholder=\"发布你的健康留言\" />\r\n      <button class=\"mt-2\" @click=\"publish\">发布</button>\r\n    </view>\r\n    <view class=\"mt-2 card\" v-for=\"m in messages\" :key=\"m._id\">\r\n      <view>{{ m.content }}</view>\r\n    </view>\r\n  </view>\r\n</template>\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { onShow } from '@dcloudio/uni-app'\r\nimport { messageService } from '../../services/api.js'\r\n\r\nconst content = ref('')\r\nconst messages = ref([])\r\n\r\nconst load = async () => {\r\n  try {\r\n    const res = await messageService.listPublic()\r\n    messages.value = res.messages || res.data || []\r\n  } catch (e) {\r\n    console.error(e)\r\n  }\r\n}\r\n\r\nconst publish = async () => {\r\n  if (!content.value) {\r\n    uni.showToast({ title: '请输入内容', icon: 'none' })\r\n    return\r\n  }\r\n  try {\r\n    await messageService.publish(content.value)\r\n    content.value = ''\r\n    await load()\r\n  } catch (e) {\r\n    console.error(e)\r\n  }\r\n}\r\n\r\nonShow(load)\r\n</script>\r\n<style scoped>\r\ninput{border:1px solid #eee;padding:12rpx;border-radius:8rpx;margin-top:12rpx}\r\nbutton{background:#1afa29;color:#fff;padding:16rpx;border-radius:8rpx;}\r\n</style>\r\n","import MiniProgramPage from 'D:/Work/unicode/health_app/pages/community/community.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","messageService","uni","onShow"],"mappings":";;;;;;AAgBA,UAAM,UAAUA,cAAG,IAAC,EAAE;AACtB,UAAM,WAAWA,cAAG,IAAC,EAAE;AAEvB,UAAM,OAAO,YAAY;AACvB,UAAI;AACF,cAAM,MAAM,MAAMC,aAAc,eAAC,WAAY;AAC7C,iBAAS,QAAQ,IAAI,YAAY,IAAI,QAAQ,CAAE;AAAA,MAChD,SAAQ,GAAG;AACVC,sBAAAA,MAAc,MAAA,SAAA,uCAAA,CAAC;AAAA,MAChB;AAAA,IACH;AAEA,UAAM,UAAU,YAAY;AAC1B,UAAI,CAAC,QAAQ,OAAO;AAClBA,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,QAAQ;AAC9C;AAAA,MACD;AACD,UAAI;AACF,cAAMD,4BAAe,QAAQ,QAAQ,KAAK;AAC1C,gBAAQ,QAAQ;AAChB,cAAM,KAAM;AAAA,MACb,SAAQ,GAAG;AACVC,sBAAAA,MAAc,MAAA,SAAA,uCAAA,CAAC;AAAA,MAChB;AAAA,IACH;AAEAC,kBAAM,OAAC,IAAI;;;;;;;;;;;;;;;;;ACzCX,GAAG,WAAW,eAAe;"}